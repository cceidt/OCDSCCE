from django.db import models
from mongoengine import *

"""Clase Period"""
class Period(EmbeddedDocument):
    startDate = DateTimeField()
    endDate = DateTimeField()

"""Clase Value """
class Value(EmbeddedDocument):
    amount = StringField(max_length=50)
    currency = StringField(max_length=3)

"""Clase Unit """
class Unit(EmbeddedDocument):
     name = StringField(max_length=50)
     value = EmbeddedDocumentField(Value)

"""Clase Calssification"""
class Classification(EmbeddedDocument):
     scheme = StringField(max_length=50)
     id = StringField(max_length=50)
     description = StringField(max_length=50)
     uri = URLField()

"""Clase Item"""
class Item(EmbeddedDocument):
     description = StringField(max_length=50)
     additionalClassifications = ListField(EmbeddedDocumentField(Classification))
     quantity = StringField(max_length=50)
     unit = EmbeddedDocumentField(Unit)
     classification = EmbeddedDocumentField(Classification)


"""Clase Identifier"""
class Identifier(EmbeddedDocument):
     scheme = StringField(max_length=50)
     id = StringField(max_length=50)
     legalName = StringField(max_length=50)
     uri = URLField()

"""Clase Address"""
class Address(EmbeddedDocument):
     streetAddress = StringField(max_length=50)
     locality = StringField(max_length=50)
     region = StringField(max_length=50)
     postalCode = StringField(max_length=50)
     countryName = StringField(max_length=50)

"""Clase ContactPoint"""
class ContactPoint(EmbeddedDocument):
     name = StringField(max_length=50)
     email = StringField(max_length=50)
     telephone = StringField(max_length=50)
     faxNumber = StringField(max_length=50)
     url = URLField()

"""Clase Amendment"""
class Amendment(EmbeddedDocument):
     date = DateTimeField()
     changes = StringField(max_length=50)
     rationale = StringField(max_length=50)

"""Clase Documents"""
class Documents(EmbeddedDocument):
     id_document = StringField(max_length=50)
     documentType = StringField(max_length=50)
     title = StringField(max_length=50)
     description = StringField(max_length=50)
     url = URLField()
     datePublished = DateTimeField()
     dateModified = DateTimeField()
     document_format = StringField(max_length=50)
     language = StringField(max_length=50)

"""Clase Milestone"""
class Milestone(EmbeddedDocument):
     id_milestone = StringField(max_length=50)
     title = StringField(max_length=50)
     description = StringField(max_length=50)
     dueDate = DateTimeField()
     dateModified = DateTimeField()
     status = StringField(max_length=50)
     documents = ListField(EmbeddedDocumentField(Documents))

"""Clase Organization"""
class Organization(EmbeddedDocument):
     identifier = EmbeddedDocumentField(Identifier)
     additionalIdentifiers = ListField(EmbeddedDocumentField(Identifier))
     name = StringField(max_length=50)
     address = EmbeddedDocumentField(Address)
     contactPoint = EmbeddedDocumentField(ContactPoint)

"""Clase Tender"""
class Tender(Document):
     ENQUIRIES_CHOICES = (
          ('0', 'Yes'),
          ('1', 'No'),
     )
     id_tender = StringField(max_length=50)
     title = StringField(max_length=50)
     description = StringField(max_length=50)
     status = StringField(max_length=50)
     items = ListField(EmbeddedDocumentField(Item))
     minValue = EmbeddedDocumentField(Value)
     value = EmbeddedDocumentField(Value)
     procurementMethod = StringField(max_length=50)
     procurementMethodRationale = StringField(max_length=50)
     awardCriteria = StringField(max_length=50)
     awardCriteriaDetails = StringField(max_length=50)
     submissionMethod = StringField(max_length=50)
     submissionMethodDetails = StringField(max_length=50)
     tenderPeriod = EmbeddedDocumentField(Period)
     enquiryPeriod = EmbeddedDocumentField(Period)
     hasEnquiries = StringField(max_length=50, choices=ENQUIRIES_CHOICES)
     eligibilityCriteria = StringField(max_length=50)
     awardPeriod = EmbeddedDocumentField(Period)
     numberOfTenderers = StringField(max_length=50)
     tenderers = ListField(EmbeddedDocumentField(Organization))
     procuringEntity = EmbeddedDocumentField(Organization)
     documents = ListField(EmbeddedDocumentField(Documents))
     milestones = ListField(EmbeddedDocumentField(Milestone))
     amendment = EmbeddedDocumentField(Amendment)

"""Clase Budget"""
class Budget(EmbeddedDocument):
     source = URLField()
     id_budget = StringField(max_length=50)
     description = StringField(max_length=50)
     amount = EmbeddedDocumentField(Value)
     project = StringField(max_length=50)
     id_project = StringField(max_length=50)
     uri = URLField()

"""Clase Planning"""
class Planning(Document):
     budget = EmbeddedDocumentField(Budget)
     rationale = StringField(max_length=50)
     documents = ListField(EmbeddedDocumentField(Documents))

"""Clase Award"""
class Award(Document):
     id_award = StringField(max_length=50)
     title = StringField(max_length=50)
     description = StringField(max_length=50)
     status = StringField(max_length=50)
     items = ListField(EmbeddedDocumentField(Item))
     minValue = EmbeddedDocumentField(Value)
     value = EmbeddedDocumentField(Value)
     procurementMethod = StringField(max_length=50)
     procurementMethodRationale = StringField(max_length=50)
     awardCriteria = StringField(max_length=50)
     awardCriteriaDetails = StringField(max_length=50)
     submissionMethod = ListField(StringField(max_length=50))
     submissionMethodDetails = StringField(max_length=50)
     tenderPeriod = EmbeddedDocumentField(Period)
     enquiryPeriod = EmbeddedDocumentField(Period)
     hasEnquiries = BooleanField()
     eligibilityCriteria = StringField(max_length=50)
     awardPeriod = EmbeddedDocumentField(Period)
     numberOfTenderers = StringField(max_length=50)
     tenderers = ListField(EmbeddedDocumentField(Organization))
     procuringEntity = EmbeddedDocumentField(Organization)
     documents = ListField(EmbeddedDocumentField(Documents))
     milestones = ListField(EmbeddedDocumentField(Milestone))
     amendment = amendment = EmbeddedDocumentField(Amendment)

     class Meta:
        indexes = [
            ("id_award"),
        ]

"""Clase Transaction"""
class Transaction(EmbeddedDocument):
     id_transaction = StringField(max_length=50)
     source = StringField(max_length=50)
     date = DateTimeField()
     amount = EmbeddedDocumentField(Value)
     providerOrganization = EmbeddedDocumentField(Identifier)
     receiverOrganization = EmbeddedDocumentField(Identifier)
     uri = URLField()

"""Clase Implementation"""
class Implementation(Document):
     transactions = ListField(EmbeddedDocumentField(Transaction))
     documents = ListField(EmbeddedDocumentField(Documents))
     milestones = ListField(EmbeddedDocumentField(Milestone))

"""Clase Contract"""
class Contract(Document):
     id_contract = StringField(max_length=50)
     awardID = StringField(max_length=50)
     title = StringField(max_length=50)
     description = StringField(max_length=50)
     status = StringField(max_length=50)
     period = EmbeddedDocumentField(Period)
     value = EmbeddedDocumentField(Value)
     items = ListField(EmbeddedDocumentField(Item))
     dateSigned = DateTimeField()
     documents = ListField(EmbeddedDocumentField(Documents))
     amendment = EmbeddedDocumentField(Amendment)
     implementation = Field(Implementation)
